/**
 * Blur.js (jQuery module)
 *
 * @see {@link https://github.com/jakiestfu/Blur.js|GitHub}
 * @see {@link http://blurjs.com/}
 * @author Jacob Kelley <jakie8@gmail.com>
 * @license MIT
 */
(function(L){L(["jquery"],function(l){l.w.s=function(e){function L(){this.a=this.b=this.r=0;this.next=null}var C=document.createElement("canvas"),U=!1,M=l(this).B.replace(/[^a-zA-Z0-9]/g,"");if(C.getContext){e=l.extend({source:"body",j:5,h:"",offset:{x:0,y:0},g:"",cache:!1,c:"blurjs-",draggable:!1,debug:!1},e);var W=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,
475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,
281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],X=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,
20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return this.u(function(){var E=l(this),N=l(e.source),F=N.f("backgroundImage").replace(/"/g,"").replace(/url\(|\)$/ig,"");ctx=C.getContext("2d");tempImg=new Image;tempImg.onload=function(){if(U)m=tempImg.src;else{C.style.display="none";C.width=tempImg.width;C.height=tempImg.height;ctx.drawImage(tempImg,0,0);var m=C.width,u=C.height,n=e.j;if(!(isNaN(n)||1>n)){var n=n|0,l=C.getContext("2d"),P;try{try{P=l.getImageData(0,
0,m,u)}catch(Q){try{netscape.A.l.v("UniversalBrowserRead"),P=l.getImageData(0,0,m,u)}catch(O){throw alert("Cannot access local image"),Error("unable to access local image data: "+O);}}}catch(Q){throw alert("Cannot access image"),Error("unable to access image data: "+Q);}var c=P.data,y,D,a,d,f,R,g,h,k,z,A,B,p,q,r,v,w,x,G;y=n+n+1;var S=m-1,T=u-1,t=n+1,H=t*(t+1)/2,I=new L,b=I;for(a=1;a<y;a++)if(b=b.next=new L,a==t)var V=b;b.next=I;b=a=null;R=f=0;var J=W[n],K=X[n];for(D=0;D<u;D++){p=q=r=g=h=k=0;z=t*(v=
c[f]);A=t*(w=c[f+1]);B=t*(x=c[f+2]);g+=H*v;h+=H*w;k+=H*x;b=I;for(a=0;a<t;a++)b.r=v,b.b=w,b.a=x,b=b.next;for(a=1;a<t;a++)d=f+((S<a?S:a)<<2),g+=(b.r=v=c[d])*(G=t-a),h+=(b.b=w=c[d+1])*G,k+=(b.a=x=c[d+2])*G,p+=v,q+=w,r+=x,b=b.next;a=I;b=V;for(y=0;y<m;y++)c[f]=g*J>>K,c[f+1]=h*J>>K,c[f+2]=k*J>>K,g-=z,h-=A,k-=B,z-=a.r,A-=a.b,B-=a.a,d=R+((d=y+n+1)<S?d:S)<<2,p+=a.r=c[d],q+=a.b=c[d+1],r+=a.a=c[d+2],g+=p,h+=q,k+=r,a=a.next,z+=v=b.r,A+=w=b.b,B+=x=b.a,p-=v,q-=w,r-=x,b=b.next,f+=4;R+=m}for(y=0;y<m;y++){q=r=p=h=
k=g=0;f=y<<2;z=t*(v=c[f]);A=t*(w=c[f+1]);B=t*(x=c[f+2]);g+=H*v;h+=H*w;k+=H*x;b=I;for(a=0;a<t;a++)b.r=v,b.b=w,b.a=x,b=b.next;d=m;for(a=1;a<=n;a++)f=d+y<<2,g+=(b.r=v=c[f])*(G=t-a),h+=(b.b=w=c[f+1])*G,k+=(b.a=x=c[f+2])*G,p+=v,q+=w,r+=x,b=b.next,a<T&&(d+=m);f=y;a=I;b=V;for(D=0;D<u;D++)d=f<<2,c[d]=g*J>>K,c[d+1]=h*J>>K,c[d+2]=k*J>>K,g-=z,h-=A,k-=B,z-=a.r,A-=a.b,B-=a.a,d=y+((d=D+t)<T?d:T)*m<<2,g+=p+=a.r=c[d],h+=q+=a.b=c[d+1],k+=r+=a.a=c[d+2],a=a.next,z+=v=b.r,A+=w=b.b,B+=x=b.a,p-=v,q-=w,r-=x,b=b.next,f+=
m}l.putImageData(P,0,0)}0!=e.h&&(ctx.beginPath(),ctx.rect(0,0,tempImg.width,tempImg.width),ctx.fillStyle=e.h,ctx.fill());var m=C.toDataURL();if(e.cache)try{e.debug&&console.log("Cache Set"),localStorage.setItem(e.c+M+"-"+F+"-data-image",m)}catch(Q){console.log(Q)}}u=N.f("backgroundAttachment");n="fixed"==u?"":"-"+(E.offset().left-N.offset().left-e.offset.x)+"px -"+(E.offset().top-N.offset().top-e.offset.y)+"px";E.f({"background-image":'url("'+m+'")',"background-repeat":N.f("backgroundRepeat"),"background-position":n,
"background-attachment":u});0!=e.g&&E.m(e.g);e.draggable&&(E.f({"background-attachment":"fixed","background-position":"0 0"}),E.draggable())};Storage.prototype.i=function(m){var u="",n;for(n in m)var l=m[n],u="[object Object]"==l.toString()?u+(l.x.toString()+l.y.toString()+",").replace(/[^a-zA-Z0-9]/g,""):u+(l+",").replace(/[^a-zA-Z0-9]/g,"");this.getItem(e.c+M+"-"+F+"-options-cache")!=u&&(this.removeItem(e.c+M+"-"+F+"-options-cache"),this.setItem(e.c+M+"-"+F+"-options-cache",u),e.debug&&console.log("Settings Changed, Cache Emptied"))};
var O=null;e.cache&&(localStorage.i(e),O=localStorage.getItem(e.c+M+"-"+F+"-data-image"));null!=O?(e.debug&&console.log("Cache Used"),U=!0,tempImg.src=O):(e.debug&&console.log("Source Used"),tempImg.src=F)})}};return l})})("function"===typeof define&&define.o?define:function(L,l){l(jQuery)});